# Run Raycast lint (includes ESLint, Prettier, and package.json validation)
echo "Running Raycast lint..."
npm run lint
LINT_EXIT_CODE=$?

# Run markdown lint
echo "Running Markdown lint..."
npm run lint:md
if [ $? -ne 0 ]; then
  echo "❌ Markdown lint failed. Commit aborted."
  exit 1
fi

# Run build
echo "Running build..."
npm run build
if [ $? -ne 0 ]; then
  echo "❌ Build failed. Commit aborted."
  exit 1
fi

# Check lint result last to allow build to complete even if package.json validation fails
# (author validation will fail until extension is published to Raycast store)
if [ $LINT_EXIT_CODE -ne 0 ]; then
  echo "⚠️  Raycast lint had issues, but allowing commit to proceed."
  echo "Note: package.json author validation will fail until extension is published."
fi

echo "✅ All checks passed!"
